import{_ as c}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as r,c as o,d as n,w as l,a as s,b as a,f as t,r as e}from"./app.4021f415.js";const h={},u=s("h2",{id:"_1-what-is-transe",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_1-what-is-transe","aria-hidden":"true"},"#"),a(" 1. What is TransE?")],-1),g=s("p",null,[a("TransE ("),s("strong",null,"T"),a("ranslating "),s("strong",null,"E"),a("mbedding), an "),s("u",null,"energy-based"),a(" model for learning low-dimensional embeddings of entities.")],-1),d=s("p",null,[s("strong",null,"\u6838\u5FC3\u601D\u60F3"),a("\uFF1A\u5C06 relationship \u89C6\u4E3A\u4E00\u4E2A\u5728 embedding space \u7684 translation\u3002\u5982\u679C (h, l, t) \u5B58\u5728\uFF0C\u90A3\u4E48 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l"),s("mo",null,"\u2248"),s("mi",null,"t")]),s("annotation",{encoding:"application/x-tex"},"h + l \\approx t")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7778em","vertical-align":"-0.0833em"}}),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"\u2248"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6151em"}}),s("span",{class:"mord mathnormal"},"t")])])]),a("\u3002")],-1),y=s("p",null,[s("strong",null,"Motivation"),a("\uFF1A\u4E00\u662F\u5728 Knowledge Base \u4E2D\uFF0C\u5C42\u6B21\u5316\u7684\u5173\u7CFB\u662F\u975E\u5E38\u5E38\u89C1\u7684\uFF0Ctranslation \u662F\u4E00\u79CD\u5F88\u81EA\u7136\u7684\u7528\u6765\u8868\u793A\u5B83\u4EEC\u7684\u53D8\u6362\uFF1B\u4E8C\u662F\u8FD1\u671F\u4E00\u4E9B\u4ECE text \u4E2D\u5B66\u4E60 word embedding \u7684\u7814\u7A76\u53D1\u73B0\uFF0C\u4E00\u4E9B\u4E0D\u540C\u7C7B\u578B\u7684\u5B9E\u4F53\u4E4B\u95F4\u7684 1-to-1 \u7684 relationship \u53EF\u4EE5\u88AB model \u8868\u793A\u4E3A\u5728 embedding space \u4E2D\u7684\u4E00\u79CD translation\u3002")],-1),k=s("h2",{id:"_2-learning-transe",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_2-learning-transe","aria-hidden":"true"},"#"),a(" 2. Learning TransE")],-1),v=s("p",null,"TransE \u7684\u8BAD\u7EC3\u7B97\u6CD5\u5982\u4E0B\uFF1A",-1),x=s("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20220917220547146.png",alt:"image-20220917220547146",style:{zoom:"80%"}},null,-1),b=s("h3",{id:"_2-1-\u8F93\u5165\u53C2\u6570",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_2-1-\u8F93\u5165\u53C2\u6570","aria-hidden":"true"},"#"),a(" 2.1 \u8F93\u5165\u53C2\u6570")],-1),w=s("ul",null,[s("li",null,[a("training set "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"S")]),s("annotation",{encoding:"application/x-tex"},"S")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"S")])])]),a("\uFF1A\u7528\u4E8E\u8BAD\u7EC3\u7684\u4E09\u5143\u7EC4\u7684\u96C6\u5408\uFF0Centity \u7684\u96C6\u5408\u4E3A "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"E")]),s("annotation",{encoding:"application/x-tex"},"E")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"E")])])]),a("\uFF0Crel. \u7684\u96C6\u5408\u4E3A "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"L")]),s("annotation",{encoding:"application/x-tex"},"L")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal"},"L")])])])]),s("li",null,[a("margin "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"\u03B3")]),s("annotation",{encoding:"application/x-tex"},"\\gamma")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.625em","vertical-align":"-0.1944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05556em"}},"\u03B3")])])]),a("\uFF1A\u635F\u5931\u51FD\u6570\u4E2D\u7684\u95F4\u9694\uFF0C\u8FD9\u4E2A\u5728\u539F paper \u4E2D\u63CF\u8FF0\u5F88\u6A21\u7CCA")]),s("li",null,[a("\u6BCF\u4E2A entity \u6216 rel. \u7684 embedding dim "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"k")]),s("annotation",{encoding:"application/x-tex"},"k")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03148em"}},"k")])])])])],-1),_=s("h3",{id:"_2-2-\u8BAD\u7EC3\u8FC7\u7A0B",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_2-2-\u8BAD\u7EC3\u8FC7\u7A0B","aria-hidden":"true"},"#"),a(" 2.2 \u8BAD\u7EC3\u8FC7\u7A0B")],-1),f=s("p",null,[s("strong",null,"\u521D\u59CB\u5316"),a("\uFF1A\u5BF9\u6BCF\u4E00\u4E2A entity \u548C rel. \u7684 embedding vector \u7528 xavier_uniform \u5206\u5E03\u6765\u521D\u59CB\u5316\uFF0C\u7136\u540E\u5BF9\u5B83\u4EEC\u5B9E\u65BD L1 or L2 \u6B63\u5219\u5316\u3002")],-1),M=s("p",null,[s("strong",null,"loop"),a("\uFF1A")],-1),z=s("ul",null,[s("li",null,"\u5728 entity embedding \u88AB\u66F4\u65B0\u524D\u8FDB\u884C\u4E00\u6B21\u5F52\u4E00\u5316\uFF0C\u8FD9\u662F\u901A\u8FC7\u4EBA\u4E3A\u589E\u52A0 embedding \u7684 norm \u6765\u9632\u6B62 loss \u5728\u8BAD\u7EC3\u8FC7\u7A0B\u4E2D\u6781\u5C0F\u5316\u3002"),s("li",null,[a("sample \u51FA\u4E00\u4E2A mini-batch \u7684\u6B63\u6837\u672C\u96C6\u5408 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"S"),s("mrow",null,[s("mi",null,"b"),s("mi",null,"a"),s("mi",null,"t"),s("mi",null,"c"),s("mi",null,"h")])])]),s("annotation",{encoding:"application/x-tex"},"S_{batch}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"S"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0576em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"ba"),s("span",{class:"mord mathnormal mtight"},"t"),s("span",{class:"mord mathnormal mtight"},"c"),s("span",{class:"mord mathnormal mtight"},"h")])])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])])]),s("li",null,[a("\u5C06 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"T"),s("mrow",null,[s("mi",null,"b"),s("mi",null,"a"),s("mi",null,"t"),s("mi",null,"c"),s("mi",null,"h")])])]),s("annotation",{encoding:"application/x-tex"},"T_{batch}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"T"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"ba"),s("span",{class:"mord mathnormal mtight"},"t"),s("span",{class:"mord mathnormal mtight"},"c"),s("span",{class:"mord mathnormal mtight"},"h")])])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a(" \u521D\u59CB\u5316\u4E3A\u7A7A\u96C6\uFF0C\u5B83\u8868\u793A\u672C\u6B21 loop \u7528\u4E8E\u8BAD\u7EC3 model \u7684\u6570\u636E\u96C6")]),s("li",null,[a("for "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",{separator:"true"},","),s("mi",null,"l"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")"),s("mo",null,"\u2208"),s("msub",null,[s("mi",null,"S"),s("mrow",null,[s("mi",null,"b"),s("mi",null,"a"),s("mi",null,"t"),s("mi",null,"c"),s("mi",null,"h")])])]),s("annotation",{encoding:"application/x-tex"},"(h,l,t) \\in S_{batch}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"\u2208"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"S"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0576em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"ba"),s("span",{class:"mord mathnormal mtight"},"t"),s("span",{class:"mord mathnormal mtight"},"c"),s("span",{class:"mord mathnormal mtight"},"h")])])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a(" do: "),s("ul",null,[s("li",null,[a("\u6839\u636E (h, l, t) \u6784\u9020\u51FA\u4E00\u4E2A\u9519\u8BEF\u7684\u4E09\u5143\u7EC4 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mo",{stretchy:"false"},"("),s("msup",null,[s("mi",null,"h"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",{separator:"true"},","),s("mi",null,"l"),s("mo",{separator:"true"},","),s("msup",null,[s("mi",null,"t"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"(h', l, t')")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"h"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"t"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mclose"},")")])])])]),s("li",null,[a("\u5C06 positive sample "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",{separator:"true"},","),s("mi",null,"l"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"(h,l,t)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")")])])]),a(" \u548C negative sample "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mo",{stretchy:"false"},"("),s("msup",null,[s("mi",null,"h"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",{separator:"true"},","),s("mi",null,"l"),s("mo",{separator:"true"},","),s("msup",null,[s("mi",null,"t"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"(h',l,t')")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"h"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"t"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mclose"},")")])])]),a(" \u52A0\u5165\u5230 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"T"),s("mrow",null,[s("mi",null,"b"),s("mi",null,"a"),s("mi",null,"t"),s("mi",null,"c"),s("mi",null,"h")])])]),s("annotation",{encoding:"application/x-tex"},"T_{batch}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"T"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"ba"),s("span",{class:"mord mathnormal mtight"},"t"),s("span",{class:"mord mathnormal mtight"},"c"),s("span",{class:"mord mathnormal mtight"},"h")])])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a(" \u4E2D")])])]),s("li",null,[a("\u8BA1\u7B97 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"T"),s("mrow",null,[s("mi",null,"b"),s("mi",null,"a"),s("mi",null,"t"),s("mi",null,"c"),s("mi",null,"h")])])]),s("annotation",{encoding:"application/x-tex"},"T_{batch}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8333em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"T"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"ba"),s("span",{class:"mord mathnormal mtight"},"t"),s("span",{class:"mord mathnormal mtight"},"c"),s("span",{class:"mord mathnormal mtight"},"h")])])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a(" \u6BCF\u4E00\u5BF9 positive sample \u548C negative sample \u7684 loss\uFF0C\u7136\u540E\u7D2F\u52A0\u8D77\u6765\u7528\u4E8E\u66F4\u65B0 embedding matrix\u3002\u6BCF\u4E00\u5BF9\u7684 loss \u8BA1\u7B97\u65B9\u5F0F\u4E3A\uFF1A"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"l"),s("mi",null,"o"),s("mi",null,"s"),s("mi",null,"s"),s("mo",null,"="),s("mo",{stretchy:"false"},"["),s("mi",null,"\u03B3"),s("mo",null,"+"),s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")"),s("mo",null,"\u2212"),s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("msup",null,[s("mi",null,"h"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("msup",null,[s("mi",null,"t"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",{stretchy:"false"},")"),s("msub",null,[s("mo",{stretchy:"false"},"]"),s("mo",null,"+")])]),s("annotation",{encoding:"application/x-tex"},"loss = [\\gamma + d(h+l,t) - d(h'+l,t')]_+")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal"},"oss"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05556em"}},"\u03B3"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"\u2212"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"h"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"t"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mclose"},")"),s("span",{class:"mclose"},[s("span",{class:"mclose"},"]"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2583em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mbin mtight"},"+")])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2083em"}},[s("span")])])])])])])])])])],-1),L=s("p",null,[a("\u8FD9\u4E2A\u8FC7\u7A0B\u4E2D\uFF0Ctriplet \u7684 energy \u5C31\u662F\u6307\u7684 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"d(h+l,t)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")")])])]),a("\uFF0C\u5B83\u8861\u91CF\u4E86 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l")]),s("annotation",{encoding:"application/x-tex"},"h+l")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7778em","vertical-align":"-0.0833em"}}),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l")])])]),a(" \u4E0E "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"t")]),s("annotation",{encoding:"application/x-tex"},"t")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6151em"}}),s("span",{class:"mord mathnormal"},"t")])])]),a(" \u7684\u8DDD\u79BB\uFF0C\u53EF\u4EE5\u91C7\u7528 L1 \u6216 L2 norm\uFF0C\u5373 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"\u2223"),s("mi",{mathvariant:"normal"},"\u2223"),s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"r"),s("mo",null,"\u2212"),s("mi",null,"t"),s("mi",{mathvariant:"normal"},"\u2223"),s("mi",{mathvariant:"normal"},"\u2223")]),s("annotation",{encoding:"application/x-tex"},"||h + r - t||")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"\u2223\u2223"),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6667em","vertical-align":"-0.0833em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"\u2212"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mord"},"\u2223\u2223")])])]),a(" \u5177\u4F53\u8BA1\u7B97\u65B9\u5F0F\u53EF\u89C1\u4EE3\u7801\u5B9E\u73B0\u3002")],-1),E=s("p",null,[a("loss \u7684\u8BA1\u7B97\u4E2D\uFF0C"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mo",{stretchy:"false"},"["),s("mi",null,"x"),s("msub",null,[s("mo",{stretchy:"false"},"]"),s("mo",null,"+")]),s("mo",null,"="),s("mi",null,"max"),s("mo",null,"\u2061"),s("mo",{stretchy:"false"},"("),s("mn",null,"0"),s("mo",{separator:"true"},","),s("mi",null,"x"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"[x]_+ = \\max(0,x)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal"},"x"),s("span",{class:"mclose"},[s("span",{class:"mclose"},"]"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2583em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mbin mtight"},"+")])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2083em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mop"},"max"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"0"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"x"),s("span",{class:"mclose"},")")])])]),a("\u3002")],-1),T=s("p",null,[a("\u5173\u4E8E "),s("strong",null,[a("margin "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"\u03B3")]),s("annotation",{encoding:"application/x-tex"},"\\gamma")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.625em","vertical-align":"-0.1944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05556em"}},"\u03B3")])])]),a(" \u7684\u542B\u4E49")]),a("\uFF0C \u5B83\u76F8\u5F53\u4E8E\u662F\u4E00\u4E2A\u6B63\u786E triple \u4E0E\u9519\u8BEF triple \u4E4B\u524D\u7684\u95F4\u9694\u4FEE\u6B63\uFF0Cmargin \u8D8A\u5927\uFF0C\u5219\u4E24\u4E2A triple \u4E4B\u524D\u88AB\u4FEE\u6B63\u7684\u95F4\u9694\u5C31\u8D8A\u5927\uFF0C\u5219\u5BF9\u4E8E embedding \u7684\u4FEE\u6B63\u5C31\u8D8A\u4E25\u683C\u3002\u6211\u4EEC\u770B "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"l"),s("mi",null,"o"),s("mi",null,"s"),s("mi",null,"s"),s("mo",null,"="),s("mo",{stretchy:"false"},"["),s("mi",null,"\u03B3"),s("mo",null,"+"),s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")"),s("mo",null,"\u2212"),s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("msup",null,[s("mi",null,"h"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("msup",null,[s("mi",null,"t"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",{stretchy:"false"},")"),s("msub",null,[s("mo",{stretchy:"false"},"]"),s("mo",null,"+")])]),s("annotation",{encoding:"application/x-tex"},"loss = [\\gamma + d(h+l,t) - d(h'+l,t')]_+")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal"},"oss"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"["),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05556em"}},"\u03B3"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"\u2212"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"h"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"t"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mclose"},")"),s("span",{class:"mclose"},[s("span",{class:"mclose"},"]"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2583em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mbin mtight"},"+")])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2083em"}},[s("span")])])])])])])])]),a("\uFF0C\u6211\u4EEC\u5E0C\u671B\u662F "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"d(h+l,t)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")")])])]),a(" \u8D8A\u5C0F\u8D8A\u597D\uFF0C\u6240\u4EE5\u8FD9\u4E00\u9879\u524D\u9762\u4E3A\u6B63\u53F7\uFF0C\u5E0C\u671B "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("msup",null,[s("mi",null,"h"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("msup",null,[s("mi",null,"t"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"d(h'+l,t')")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"h"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"t"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mclose"},")")])])]),a(" \u8D8A\u5927\u8D8A\u597D\uFF0C\u6240\u4EE5\u8FD9\u4E00\u9879\u524D\u9762\u4E3A\u8D1F\u53F7\u3002\u6B63\u5E38\u60C5\u51B5\u4E0B\uFF0C"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"d(h+l,t)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")")])])]),a(" \u4E00\u5B9A\u662F\u5C0F\u4E8E "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("msup",null,[s("mi",null,"h"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("msup",null,[s("mi",null,"t"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"d(h'+l,t')")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"h"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"t"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mclose"},")")])])]),a(" \u7684\uFF0C\u6240\u4EE5 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")"),s("mo",null,"\u2212"),s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("msup",null,[s("mi",null,"h"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("msup",null,[s("mi",null,"t"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"d(h+l,t) - d(h'+l,t')")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"\u2212"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"h"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"t"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mclose"},")")])])]),a(" \u7684\u7ED3\u679C\u5E94\u8BE5\u662F\u8D1F\u503C\uFF0C\u90A3\u4E48 loss function \u7684\u5916\u5C42\u53D6\u6B63\u5C31\u4F7F\u5F97 loss = 0 \u4E86\uFF0C\u6240\u4EE5 margin "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"\u03B3")]),s("annotation",{encoding:"application/x-tex"},"\\gamma")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.625em","vertical-align":"-0.1944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05556em"}},"\u03B3")])])]),a(" \u7684\u5B58\u5728\u5C31\u4F7F\u5F97\u8D1F\u6837\u672C\u7684 distance \u5FC5\u987B\u4E0E\u6BD4\u6B63\u6837\u672C\u7684 distance \u5927\u51FA margin \u7684\u5927\u5C0F\u6765\u624D\u884C\uFF0C\u5F53\u4E24\u8005\u5DEE\u8DDD\u8DB3\u591F\u5927\u65F6\uFF0Closs \u5C31\u7B49\u4E8E 0 \u4E86\u3002")],-1),N=s("p",null,[a("\u5047\u8BBE "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"d(h+l,t)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")")])])]),a(" \u5904\u4E8E\u7406\u60F3\u60C5\u51B5\u4E0B\u7B49\u4E8E 0\uFF0C\u90A3\u4E48\u7531\u4E8E "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"\u03B3")]),s("annotation",{encoding:"application/x-tex"},"\\gamma")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.625em","vertical-align":"-0.1944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05556em"}},"\u03B3")])])]),a(" \u7684\u5B58\u5728\uFF0C"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("msup",null,[s("mi",null,"h"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("msup",null,[s("mi",null,"t"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"d(h'+l,t')")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"h"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"t"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mclose"},")")])])]),a(" \u5982\u679C\u4E0D\u662F\u5F88\u5927\u7684\u8BDD\uFF0C\u4ECD\u7136\u4F1A\u4EA7\u751F loss\uFF0C\u53EA\u6709\u5F53 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("msup",null,[s("mi",null,"h"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("msup",null,[s("mi",null,"t"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"d(h'+l,t')")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"h"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"t"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mclose"},")")])])]),a(" \u5927\u4E8E "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"\u03B3")]),s("annotation",{encoding:"application/x-tex"},"\\gamma")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.625em","vertical-align":"-0.1944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05556em"}},"\u03B3")])])]),a(" \u65F6\u624D\u4F1A\u8BA9 loss = 0\uFF0C\u6240\u4EE5 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"\u03B3")]),s("annotation",{encoding:"application/x-tex"},"\\gamma")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.625em","vertical-align":"-0.1944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.05556em"}},"\u03B3")])])]),a(" \u8D8A\u5927\uFF0C\u5BF9 embedding \u7684\u4FEE\u6B63\u5C31\u8D8A\u4E25\u683C\u3002")],-1),S=s("p",null,[s("strong",null,"\u9519\u8BEF\u4E09\u5143\u7EC4\u7684\u6784\u9020\u65B9\u6CD5"),a("\uFF1A\u5C06 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",{separator:"true"},","),s("mi",null,"l"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"(h,l,t)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")")])])]),a(" \u4E2D\u7684\u5934\u5B9E\u4F53\u3001\u5173\u7CFB\u548C\u5C3E\u5B9E\u4F53\u5176\u4E2D\u4E4B\u4E00\u968F\u673A\u66FF\u6362\u4E3A\u5176\u4ED6\u5B9E\u4F53\u6216\u5173\u7CFB\u6765\u5F97\u5230\u3002")],-1),q=s("h3",{id:"_2-3-\u8BC4\u4EF7\u6307\u6807",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_2-3-\u8BC4\u4EF7\u6307\u6807","aria-hidden":"true"},"#"),a(" 2.3 \u8BC4\u4EF7\u6307\u6807")],-1),B=s("p",null,[s("strong",null,"\u94FE\u63A5\u9884\u6D4B"),a("\u662F\u7528\u6765\u9884\u6D4B\u4E09\u5143\u7EC4 (h,r,t) \u4E2D\u7F3A\u5931\u5B9E\u4F53 h, t \u6216 r \u7684\u4EFB\u52A1\uFF0C\u5BF9\u4E8E\u6BCF\u4E00\u4E2A\u7F3A\u5931\u7684\u5B9E\u4F53\uFF0C\u6A21\u578B\u5C06\u88AB\u8981\u6C42\u7528\u6240\u6709\u7684\u77E5\u8BC6\u56FE\u8C31\u4E2D\u7684\u5B9E\u4F53\u4F5C\u4E3A\u5019\u9009\u9879\u8FDB\u884C\u8BA1\u7B97\uFF0C\u5E76\u8FDB\u884C\u6392\u540D\uFF0C\u800C\u4E0D\u662F\u5355\u7EAF\u7ED9\u51FA\u4E00\u4E2A\u6700\u4F18\u7684\u9884\u6D4B\u7ED3\u679C\u3002")],-1),H=s("mark",null,"Mean rank",-1),F=s("p",null,[a("\u9996\u5148\u5BF9\u4E8E\u6BCF\u4E2A testing triple\uFF0C\u4EE5\u9884\u6D4B tail entity \u4E3A\u4F8B\uFF0C\u6211\u4EEC\u5C06 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",{separator:"true"},","),s("mi",null,"r"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"(h,r,t)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")")])])]),a(" \u4E2D\u7684 t \u7528 KG \u4E2D\u7684\u6BCF\u4E2A entity \u6765\u4EE3\u66FF\uFF0C\u7136\u540E\u901A\u8FC7 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"f"),s("mi",null,"r")]),s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"f_r(h,t)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1076em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"r")])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")")])])]),a(" \u6765\u8BA1\u7B97\u5206\u6570\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u5F97\u5230\u4E00\u7CFB\u5217\u7684\u5206\u6570\uFF0C\u7136\u540E\u5C06\u8FD9\u4E9B\u5206\u6570\u6392\u5217\u3002\u6211\u4EEC\u77E5\u9053 f \u51FD\u6570\u503C\u8D8A\u5C0F\u8D8A\u597D\uFF0C\u90A3\u4E48\u5728\u524D\u9762\u7684\u6392\u5217\u4E2D\uFF0C\u6392\u5730\u8D8A\u9760\u524D\u8D8A\u597D\u3002\u91CD\u70B9\u6765\u4E86\uFF0C\u6211\u4EEC\u53BB\u770B\u6BCF\u4E2A testing triple \u4E2D\u6B63\u786E\u7B54\u6848\uFF08\u4E5F\u5C31\u662F\u771F\u5B9E\u7684 t\uFF09\u5728\u4E0A\u8FF0\u5E8F\u5217\u4E2D\u6392\u591A\u5C11\u4F4D\uFF0C\u6BD4\u5982 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"t"),s("mn",null,"1")])]),s("annotation",{encoding:"application/x-tex"},"t_1")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7651em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"t"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a(" \u6392 100\uFF0C"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"t"),s("mn",null,"2")])]),s("annotation",{encoding:"application/x-tex"},"t_2")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7651em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"t"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a(" \u6392 200\uFF0C"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"t"),s("mn",null,"3")])]),s("annotation",{encoding:"application/x-tex"},"t_3")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7651em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"t"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"3")])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a(" \u6392 60 ....\uFF0C\u4E4B\u540E\u5BF9\u8FD9\u4E9B\u6392\u540D\u6C42\u5E73\u5747\uFF0C\u5C31\u5F97\u5230 mean rank \u503C\u4E86\u3002")],-1),V={start:"2"},G=s("mark",null,"Hits@10",-1),K=s("p",null,"\u8FD8\u662F\u6309\u7167\u4E0A\u8FF0\u8FDB\u884C f \u51FD\u6570\u503C\u6392\u5217\uFF0C\u7136\u540E\u770B\u6BCF\u4E2A testing triple \u6B63\u786E\u7B54\u6848\u662F\u5426\u6392\u5728\u5E8F\u5217\u7684\u524D\u5341\uFF0C\u5982\u679C\u5728\u7684\u8BDD\u5C31\u8BA1\u6570 +1\uFF0C\u6700\u7EC8 (\u6392\u5728\u524D\u5341\u7684\u4E2A\u6570) / (\u603B\u4E2A\u6570) \u5C31\u7B49\u4E8E Hits@10\u3002",-1),R=s("p",null,"\u5728\u539F\u8BBA\u6587\u4E2D\uFF0C\u7531\u4E8E\u8FD9\u4E2A model \u6BD4\u8F83\u8001\u4E86\uFF0C\u5176 baseline \u4E5F\u6CA1\u5565\u53C2\u8003\u6027\uFF0C\u5C31\u4E0D\u505A\u7814\u7A76\u4E86\uFF0C\u5177\u4F53\u7684\u5B9E\u9A8C\u53EF\u53C2\u8003\u8BBA\u6587\u3002",-1),U=s("h2",{id:"_3-transe-\u4F18\u7F3A\u70B9",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_3-transe-\u4F18\u7F3A\u70B9","aria-hidden":"true"},"#"),a(" 3. TransE \u4F18\u7F3A\u70B9")],-1),j=s("p",null,[s("strong",null,"\u4F18\u70B9"),a("\uFF1A\u4E0E\u4EE5\u5F80\u6A21\u578B\u76F8\u6BD4\uFF0CTransE \u6A21\u578B\u53C2\u6570\u8F83\u5C11\uFF0C\u8BA1\u7B97\u590D\u6742\u5EA6\u4F4E\uFF0C\u5374\u80FD\u76F4\u63A5\u5EFA\u7ACB\u5B9E\u4F53\u548C\u5173\u7CFB\u4E4B\u95F4\u7684\u590D\u6742\u8BED\u4E49\u8054\u7CFB\uFF0C\u5728 WordNet \u548C Freebase \u7B49 dataset \u4E0A\u8F83\u4EE5\u5F80\u6A21\u578B\u7684 performance \u6709\u4E86\u663E\u8457\u63D0\u5347\uFF0C\u7279\u522B\u662F\u5728\u5927\u89C4\u6A21\u7A00\u758F KG \u4E0A\uFF0CTransE \u7684\u6027\u80FD\u5C24\u5176\u60CA\u4EBA\u3002")],-1),C=s("p",null,[s("strong",null,"\u7F3A\u70B9"),a("\uFF1A\u5728\u5904\u7406\u590D\u6742\u5173\u7CFB\uFF081-N\u3001N-1 \u548C N-N\uFF09\u65F6\uFF0C\u6027\u80FD\u663E\u8457\u964D\u4F4E\uFF0C\u8FD9\u4E0E TransE \u7684\u6A21\u578B\u5047\u8BBE\u6709\u5BC6\u5207\u5173\u7CFB\u3002\u5047\u8BBE\u6709 (\u7F8E\u56FD\uFF0C\u603B\u7EDF\uFF0C\u5965\u5DF4\u9A6C\uFF09\u548C\uFF08\u7F8E\u56FD\uFF0C\u603B\u7EDF\uFF0C\u5E03\u4EC0\uFF09\uFF0C\u8FD9\u91CC\u7684\u201C\u603B\u7EDF\u201D\u5173\u7CFB\u662F\u5178\u578B\u7684 1-N \u7684\u590D\u6742\u5173\u7CFB\uFF0C\u5982\u679C\u7528 TransE \u5BF9\u5176\u8FDB\u884C\u5B66\u4E60\uFF0C\u5219\u4F1A\u6709\uFF1A")],-1),I=s("img",{src:"https://notebook-img-1304596351.cos.ap-beijing.myqcloud.com/img/image-20220917220710170.png",alt:"image-20220917220710170",style:{zoom:"67%"}},null,-1),W=s("p",null,"\u90A3\u4E48\u8FD9\u5C06\u4F1A\u4F7F\u5965\u5DF4\u9A6C\u548C\u5E03\u4EC0\u7684 vector \u53D8\u5F97\u76F8\u540C\u3002\u6240\u4EE5\u7531\u4E8E\u8FD9\u4E9B\u590D\u6742\u5173\u7CFB\u7684\u5B58\u5728\uFF0C\u5BFC\u81F4 TransE \u5B66\u4E60\u5F97\u5230\u7684\u5B9E\u4F53\u8868\u793A\u533A\u5206\u6027\u8F83\u4F4E\u3002",-1),A=s("h2",{id:"_4-transe-\u5B9E\u73B0",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_4-transe-\u5B9E\u73B0","aria-hidden":"true"},"#"),a(" 4. TransE \u5B9E\u73B0")],-1),Y=s("p",null,"\u8FD9\u91CC\u9009\u62E9\u7528 pytorch \u6765\u5B9E\u73B0 TransE \u6A21\u578B\u3002",-1),D=s("h3",{id:"_4-1-init-\u51FD\u6570",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_4-1-init-\u51FD\u6570","aria-hidden":"true"},"#"),a(" 4.1 "),s("code",null,"__init__"),a(" \u51FD\u6570")],-1),J=s("p",null,"\u5176\u53C2\u6570\u6709\uFF1A",-1),O=s("ul",null,[s("li",null,"ent_num\uFF1Aentity \u7684\u6570\u91CF"),s("li",null,"rel_num\uFF1Arelationship \u7684\u6570\u91CF"),s("li",null,"dim\uFF1A\u6BCF\u4E2A embedding vector \u7684\u7EF4\u5EA6"),s("li",null,[a("norm\uFF1A\u5728\u8BA1\u7B97 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"d(h+l,t)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")")])])]),a(" \u65F6\u662F\u4F7F\u7528 L1 norm \u8FD8\u662F L2 norm\uFF0C\u5373 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("mi",{mathvariant:"normal"},"\u2223"),s("mi",{mathvariant:"normal"},"\u2223"),s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l"),s("mo",null,"\u2212"),s("mi",null,"t"),s("mi",{mathvariant:"normal"},"\u2223"),s("msub",null,[s("mi",{mathvariant:"normal"},"\u2223"),s("mrow",null,[s("mi",null,"L"),s("mn",null,"1"),s("mtext",null,"\xA0"),s("mi",null,"o"),s("mi",null,"r"),s("mtext",null,"\xA0"),s("mi",null,"L"),s("mn",null,"2")])])]),s("annotation",{encoding:"application/x-tex"},"d(h+l,t)=||h+l-t||_{L1 \\ or \\ L2}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},"\u2223\u2223"),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7778em","vertical-align":"-0.0833em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"\u2212"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mord"},"\u2223"),s("span",{class:"mord"},[s("span",{class:"mord"},"\u2223"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3283em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"L"),s("span",{class:"mord mtight"},"1"),s("span",{class:"mspace mtight"},[s("span",{class:"mtight"},"\xA0")]),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"or"),s("span",{class:"mspace mtight"},[s("span",{class:"mtight"},"\xA0")]),s("span",{class:"mord mathnormal mtight"},"L"),s("span",{class:"mord mtight"},"2")])])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])])]),s("li",null,"margin\uFF1A\u635F\u5931\u51FD\u6570\u4E2D\u7684\u95F4\u9694\uFF0C\u662F\u4E2A hyper-parameter"),s("li",null,[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"\u03B1")]),s("annotation",{encoding:"application/x-tex"},"\\alpha")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.0037em"}},"\u03B1")])])]),a("\uFF1A\u635F\u5931\u51FD\u6570\u8BA1\u7B97\u4E2D\u7684\u6B63\u5219\u5316\u9879\u53C2\u6570")])],-1),P=t(`<div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TransE</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> ent_num<span class="token punctuation">,</span> rel_num<span class="token punctuation">,</span> device<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span> norm<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> margin<span class="token operator">=</span><span class="token number">2.0</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>TransE<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ent_num <span class="token operator">=</span> ent_num
        self<span class="token punctuation">.</span>rel_num <span class="token operator">=</span> rel_num
        self<span class="token punctuation">.</span>device <span class="token operator">=</span> device
        self<span class="token punctuation">.</span>dim <span class="token operator">=</span> dim
        self<span class="token punctuation">.</span>norm <span class="token operator">=</span> norm <span class="token comment"># \u4F7F\u7528L1\u8303\u6570\u8FD8\u662FL2\u8303\u6570</span>
        self<span class="token punctuation">.</span>margin <span class="token operator">=</span> margin
        self<span class="token punctuation">.</span>alpha <span class="token operator">=</span> alpha

        <span class="token comment"># \u521D\u59CB\u5316\u5B9E\u4F53\u548C\u5173\u7CFB\u8868\u793A\u5411\u91CF</span>
        self<span class="token punctuation">.</span>ent_embeddings <span class="token operator">=</span> nn<span class="token punctuation">.</span>Embedding<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ent_num<span class="token punctuation">,</span> self<span class="token punctuation">.</span>dim<span class="token punctuation">)</span>
        torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>init<span class="token punctuation">.</span>xavier_uniform_<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ent_embeddings<span class="token punctuation">.</span>weight<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>ent_embeddings<span class="token punctuation">.</span>weight<span class="token punctuation">.</span>data <span class="token operator">=</span> F<span class="token punctuation">.</span>normalize<span class="token punctuation">(</span>self<span class="token punctuation">.</span>ent_embeddings<span class="token punctuation">.</span>weight<span class="token punctuation">.</span>data<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>rel_embeddings <span class="token operator">=</span> nn<span class="token punctuation">.</span>Embedding<span class="token punctuation">(</span>self<span class="token punctuation">.</span>rel_num<span class="token punctuation">,</span> self<span class="token punctuation">.</span>dim<span class="token punctuation">)</span>
        torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>init<span class="token punctuation">.</span>xavier_uniform_<span class="token punctuation">(</span>self<span class="token punctuation">.</span>rel_embeddings<span class="token punctuation">.</span>weight<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>rel_embeddings<span class="token punctuation">.</span>weight<span class="token punctuation">.</span>data <span class="token operator">=</span> F<span class="token punctuation">.</span>normalize<span class="token punctuation">(</span>self<span class="token punctuation">.</span>rel_embeddings<span class="token punctuation">.</span>weight<span class="token punctuation">.</span>data<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

        <span class="token comment"># \u635F\u5931\u51FD\u6570</span>
        self<span class="token punctuation">.</span>criterion <span class="token operator">=</span> nn<span class="token punctuation">.</span>MarginRankingLoss<span class="token punctuation">(</span>margin<span class="token operator">=</span>self<span class="token punctuation">.</span>margin<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521D\u59CB\u5316 embedding matrix \u65F6\uFF0C\u76F4\u63A5\u7528 <code>nn.Embedding</code> \u6765\u5B8C\u6210\uFF0C\u53C2\u6570\u5206\u522B\u662F entity \u7684\u6570\u91CF\u548C\u6BCF\u4E2A embedding vector \u7684\u7EF4\u6570\uFF0C\u8FD9\u6837\u5F97\u5230\u7684\u5C31\u662F\u4E00\u4E2A ent_num * dim \u5927\u5C0F\u7684 Embedding Matrix\u3002</p>`,2),Q=s("p",null,[s("code",null,"torch.nn.init.xavier_uniform_"),a(" \u662F\u4E00\u4E2A\u670D\u4ECE\u5747\u5300\u5206\u5E03\u7684 Glorot \u521D\u59CB\u5316\u5668\uFF0C\u5728\u8FD9\u91CC\u505A\u7684\u5C31\u662F\u5BF9 Embedding Matrix \u4E2D\u6BCF\u4E2A\u4F4D\u7F6E\u586B\u5145\u4E00\u4E2A xavier_uniform \u521D\u59CB\u5316\u7684\u503C\uFF0C\u8FD9\u4E9B\u503C\u4ECE\u5747\u5300\u5206\u5E03 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"U"),s("mo",{stretchy:"false"},"("),s("mo",null,"\u2212"),s("mi",null,"a"),s("mo",{separator:"true"},","),s("mi",null,"a"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"U(-a,a)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"U"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"\u2212"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mclose"},")")])])]),a(" \u4E2D\u91C7\u6837\u5F97\u5230\uFF0C\u8FD9\u91CC\u7684 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"a")]),s("annotation",{encoding:"application/x-tex"},"a")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal"},"a")])])]),a(" \u662F\uFF1A")],-1),X=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"a"),s("mo",null,"="),s("mi",null,"g"),s("mi",null,"a"),s("mi",null,"i"),s("mi",null,"n"),s("mo",null,"\xD7"),s("msqrt",null,[s("mfrac",null,[s("mn",null,"6"),s("mrow",null,[s("mi",null,"f"),s("mi",null,"a"),s("mi",null,"n"),s("mi",{mathvariant:"normal"},"_"),s("mi",null,"i"),s("mi",null,"n"),s("mo",null,"+"),s("mi",null,"f"),s("mi",null,"a"),s("mi",null,"n"),s("mi",{mathvariant:"normal"},"_"),s("mi",null,"o"),s("mi",null,"u"),s("mi",null,"t")])])])]),s("annotation",{encoding:"application/x-tex"}," a = gain \\times \\sqrt{\\frac{6}{fan\\_in + fan\\_out}} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.854em","vertical-align":"-0.1944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"g"),s("span",{class:"mord mathnormal"},"ain"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"\xD7"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"3.04em","vertical-align":"-1.2434em"}}),s("span",{class:"mord sqrt"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.7966em"}},[s("span",{class:"svg-align",style:{top:"-5em"}},[s("span",{class:"pstrut",style:{height:"5em"}}),s("span",{class:"mord",style:{"padding-left":"1em"}},[s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3214em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"mord mathnormal"},"an"),s("span",{class:"mord",style:{"margin-right":"0.02778em"}},"_"),s("span",{class:"mord mathnormal"},"in"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),s("span",{class:"mord mathnormal"},"an"),s("span",{class:"mord",style:{"margin-right":"0.02778em"}},"_"),s("span",{class:"mord mathnormal"},"o"),s("span",{class:"mord mathnormal"},"u"),s("span",{class:"mord mathnormal"},"t")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"6")])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.996em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])]),s("span",{style:{top:"-3.7566em"}},[s("span",{class:"pstrut",style:{height:"5em"}}),s("span",{class:"hide-tail",style:{"min-width":"1.02em",height:"3.08em"}},[s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"3.08em",viewBox:"0 0 400000 3240",preserveAspectRatio:"xMinYMin slice"},[s("path",{d:`M473,2793
c339.3,-1799.3,509.3,-2700,510,-2702 l0 -0
c3.3,-7.3,9.3,-11,18,-11 H400000v40H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM1001 80h400000v40H1017.7z`})])])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.2434em"}},[s("span")])])])])])])])])],-1),Z={href:"https://pytorch.org/docs/stable/nn.init.html",target:"_blank",rel:"noopener noreferrer"},$=s("p",null,[s("code",null,"F.normalize(self.ent_embeddings.weight.data, 2, 1)"),a(" \u8FD9\u4E00\u6B65\u5C31\u662F\u5BF9 ent_embeddings \u7684\u6BCF\u4E00\u4E2A\u503C\u9664\u4EE5 dim = 1 \u4E0A\u7684 2 \u8303\u6570\u503C\uFF0C\u6CE8\u610F ent_embeddings.weight.data \u7684 size \u662F (ent_num, embs_dim)\u3002\u5177\u4F53\u6765\u8BF4\u5C31\u662F\u8FD9\u4E00\u6B65\u628A\u6BCF\u884C\u90FD\u9664\u4EE5\u8BE5\u884C\u4E0B\u6240\u6709\u5143\u7D20\u5E73\u65B9\u548C\u7684\u5F00\u65B9\uFF0C\u4E5F\u5C31\u662F "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"l"),s("mo",null,"\u2190"),s("mi",null,"l"),s("mi",{mathvariant:"normal"},"/"),s("mi",{mathvariant:"normal"},"\u2223"),s("mi",{mathvariant:"normal"},"\u2223"),s("mi",null,"l"),s("mi",{mathvariant:"normal"},"\u2223"),s("mi",{mathvariant:"normal"},"\u2223")]),s("annotation",{encoding:"application/x-tex"},"l \\leftarrow l / ||l||")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"\u2190"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord"},"/\u2223\u2223"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord"},"\u2223\u2223")])])]),a("\u3002")],-1),ss=t(`<p>\u635F\u5931\u51FD\u6570\u8FD9\u91CC\u5148\u8DF3\u8FC7\uFF0C\u4E4B\u540E\u8BA1\u7B97\u635F\u5931\u7684\u6B65\u9AA4\u4E00\u540C\u6765\u770B\u3002</p><h3 id="_4-2-\u4ECE-ent-idx-\u5230-ent-embs" tabindex="-1"><a class="header-anchor" href="#_4-2-\u4ECE-ent-idx-\u5230-ent-embs" aria-hidden="true">#</a> 4.2 \u4ECE ent_idx \u5230 ent_embs</h3><p>\u7531\u4E8E network \u7684\u8F93\u5165\u662F ent_idx\uFF0C\u56E0\u6B64\u9700\u8981\u5C06\u5176\u6839\u636E embedding matrix \u8F6C\u6362\u6210 ent_embs\u3002\u6211\u4EEC\u901A\u8FC7 <code>get_ent_resps</code> \u51FD\u6570\u6765\u5B8C\u6210\uFF0C\u5176\u5B9E\u5C31\u662F\u4E2A\u9759\u6001\u67E5\u8868\u7684\u64CD\u4F5C\uFF1A</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TransE</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">def</span> <span class="token function">get_ent_resps</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> ent_idx<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#[batch]</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>ent_embeddings<span class="token punctuation">(</span>ent_idx<span class="token punctuation">)</span> <span class="token comment"># [batch, emb]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),as=s("h3",{id:"_4-3-\u8BA1\u7B97-energy",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_4-3-\u8BA1\u7B97-energy","aria-hidden":"true"},"#"),a(" 4.3 \u8BA1\u7B97 energy "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"d(h+l, t)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")")])])])],-1),ns=s("p",null,[a("\u5B83\u8861\u91CF\u4E86 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l")]),s("annotation",{encoding:"application/x-tex"},"h+l")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7778em","vertical-align":"-0.0833em"}}),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l")])])]),a(" \u4E0E "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"t")]),s("annotation",{encoding:"application/x-tex"},"t")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6151em"}}),s("span",{class:"mord mathnormal"},"t")])])]),a(" \u7684\u8DDD\u79BB\uFF0C\u53EF\u4EE5\u91C7\u7528 L1 \u6216 L2 norm \u6765\u7B97\uFF0C\u5177\u4F53\u91C7\u7528\u54EA\u4E2A\u7531 "),s("code",null,"__init__"),a(" \u51FD\u6570\u4E2D\u7684 self.norm \u6765\u51B3\u5B9A\uFF1A")],-1),ts=t(`<div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TransE</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">def</span> <span class="token function">distance</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> h_idx<span class="token punctuation">,</span> r_idx<span class="token punctuation">,</span> t_idx<span class="token punctuation">)</span><span class="token punctuation">:</span>
        h_embs <span class="token operator">=</span> self<span class="token punctuation">.</span>ent_embeddings<span class="token punctuation">(</span>h_idx<span class="token punctuation">)</span> <span class="token comment"># [batch, emb]</span>
        r_embs <span class="token operator">=</span> self<span class="token punctuation">.</span>rel_embeddings<span class="token punctuation">(</span>r_idx<span class="token punctuation">)</span> <span class="token comment"># [batch, emb]</span>
        t_embs <span class="token operator">=</span> self<span class="token punctuation">.</span>ent_embeddings<span class="token punctuation">(</span>t_idx<span class="token punctuation">)</span> <span class="token comment"># [batch, emb]</span>
        scores <span class="token operator">=</span> h_embs <span class="token operator">+</span> r_embs <span class="token operator">-</span> t_embs
		
		<span class="token comment"># norm \u662F\u8BA1\u7B97 loss \u65F6\u7684\u6B63\u5219\u5316\u9879</span>
        norms <span class="token operator">=</span> <span class="token punctuation">(</span>torch<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>h_embs<span class="token punctuation">.</span>norm<span class="token punctuation">(</span>p<span class="token operator">=</span>self<span class="token punctuation">.</span>norm<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1.0</span><span class="token punctuation">)</span>
                 <span class="token operator">+</span> torch<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>r_embs <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span>
                 torch<span class="token punctuation">.</span>mean<span class="token punctuation">(</span>t_embs<span class="token punctuation">.</span>norm<span class="token punctuation">(</span>p<span class="token operator">=</span>self<span class="token punctuation">.</span>norm<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span>

        <span class="token keyword">return</span> scores<span class="token punctuation">.</span>norm<span class="token punctuation">(</span>p<span class="token operator">=</span>self<span class="token punctuation">.</span>norm<span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> norms
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-4-\u8BA1\u7B97-loss" tabindex="-1"><a class="header-anchor" href="#_4-4-\u8BA1\u7B97-loss" aria-hidden="true">#</a> 4.4 \u8BA1\u7B97 loss</h3><p>self.criterion \u662F\u901A\u8FC7\u5B9E\u4F8B\u5316 MarginRankingLoss \u5F97\u5230\u7684\uFF0C\u8FD9\u4E2A\u7C7B\u7684\u521D\u59CB\u5316\u63A5\u6536 margin \u53C2\u6570\uFF0C\u5B9E\u4F8B\u5316\u5F97\u5230 self.criterion\uFF0C\u5176\u8BA1\u7B97\u65B9\u5F0F\u5982\u4E0B\uFF1A</p>`,3),ls=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"c"),s("mi",null,"r"),s("mi",null,"i"),s("mi",null,"t"),s("mi",null,"e"),s("mi",null,"r"),s("mi",null,"i"),s("mi",null,"o"),s("mi",null,"n"),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"x"),s("mn",null,"1")]),s("mo",{separator:"true"},","),s("msub",null,[s("mi",null,"x"),s("mn",null,"2")]),s("mo",{separator:"true"},","),s("mi",null,"y"),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("mi",null,"max"),s("mo",null,"\u2061"),s("mo",{stretchy:"false"},"("),s("mn",null,"0"),s("mo",{separator:"true"},","),s("mo",null,"\u2212"),s("mi",null,"y"),s("mo",null,"\xD7"),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"x"),s("mn",null,"1")]),s("mo",null,"\u2212"),s("msub",null,[s("mi",null,"x"),s("mn",null,"2")]),s("mo",{stretchy:"false"},")"),s("mo",null,"+"),s("mi",null,"m"),s("mi",null,"a"),s("mi",null,"r"),s("mi",null,"g"),s("mi",null,"i"),s("mi",null,"n"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"}," criterion(x_1,x_2,y) = \\max(0, -y \\times (x_1 - x_2) + margin) ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"cr"),s("span",{class:"mord mathnormal"},"i"),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"er"),s("span",{class:"mord mathnormal"},"i"),s("span",{class:"mord mathnormal"},"o"),s("span",{class:"mord mathnormal"},"n"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"x"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"x"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"y"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mop"},"max"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"0"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"\u2212"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"y"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"\xD7"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"x"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"1")])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"\u2212"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"x"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3011em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{class:"vlist-s"},"\u200B")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"ma"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"g"),s("span",{class:"mord mathnormal"},"in"),s("span",{class:"mclose"},")")])])])])],-1),es=t(`<p>\u501F\u52A9\u4E8E\u6B64\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5B9E\u73B0\u8BA1\u7B97 loss \u7684\u4EE3\u7801\uFF1A</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TransE</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">def</span> <span class="token function">loss</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> positive_distances<span class="token punctuation">,</span> negative_distances<span class="token punctuation">)</span><span class="token punctuation">:</span>
        target <span class="token operator">=</span> torch<span class="token punctuation">.</span>tensor<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>torch<span class="token punctuation">.</span><span class="token builtin">float</span><span class="token punctuation">,</span> device<span class="token operator">=</span>self<span class="token punctuation">.</span>device<span class="token punctuation">)</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>criterion<span class="token punctuation">(</span>positive_distances<span class="token punctuation">,</span> negative_distances<span class="token punctuation">,</span> target<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),ms=s("p",null,[a("positive_distances \u5C31\u662F "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("mi",null,"h"),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("mi",null,"t"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"d(h+l,t)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"h"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal"},"t"),s("span",{class:"mclose"},")")])])]),a("\uFF0Cnegative_distances \u5C31\u662F "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("msup",null,[s("mi",null,"h"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",null,"+"),s("mi",null,"l"),s("mo",{separator:"true"},","),s("msup",null,[s("mi",null,"t"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"\u2032")]),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"d(h'+l, t')")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal"},"d"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"h"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0019em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"t"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7519em"}},[s("span",{style:{top:"-3.063em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"\u2032")])])])])])])])]),s("span",{class:"mclose"},")")])])]),a("\uFF0Ctarget = [-1]\uFF0C\u4EE3\u5165 criterion \u7684\u8BA1\u7B97\u516C\u5F0F\u5C31\u662F\u6211\u4EEC\u8BA1\u7B97 \u4E00\u5BF9\u6B63\u6837\u672C\u548C\u8D1F\u6837\u672C\u7684 loss \u4E86\u3002")],-1),ps=t(`<h3 id="_4-5-forward" tabindex="-1"><a class="header-anchor" href="#_4-5-forward" aria-hidden="true">#</a> 4.5 forward</h3><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">TransE</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> ph_idx<span class="token punctuation">,</span> pr_idx<span class="token punctuation">,</span> pt_idx<span class="token punctuation">,</span> nh_idx<span class="token punctuation">,</span> nr_idx<span class="token punctuation">,</span> nt_idx<span class="token punctuation">)</span><span class="token punctuation">:</span>
        pos_distances<span class="token punctuation">,</span> pos_norms <span class="token operator">=</span> self<span class="token punctuation">.</span>scoring<span class="token punctuation">(</span>ph_idx<span class="token punctuation">,</span> pr_idx<span class="token punctuation">,</span> pt_idx<span class="token punctuation">)</span>
        neg_distances<span class="token punctuation">,</span> neg_norms <span class="token operator">=</span> self<span class="token punctuation">.</span>scoring<span class="token punctuation">(</span>nh_idx<span class="token punctuation">,</span> nr_idx<span class="token punctuation">,</span> nt_idx<span class="token punctuation">)</span>

        tmp_loss <span class="token operator">=</span> self<span class="token punctuation">.</span>loss<span class="token punctuation">(</span>pos_distances<span class="token punctuation">,</span> neg_distances<span class="token punctuation">)</span>
        tmp_loss <span class="token operator">+=</span> self<span class="token punctuation">.</span>alpha <span class="token operator">*</span> pos_norms   <span class="token comment"># \u6B63\u5219\u5316\u9879</span>
        tmp_loss <span class="token operator">+=</span> self<span class="token punctuation">.</span>alpha <span class="token operator">*</span> neg_norms   <span class="token comment"># \u6B63\u5219\u5316\u9879</span>

        <span class="token keyword">return</span> tmp_loss<span class="token punctuation">,</span> pos_distances<span class="token punctuation">,</span> neg_distances
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u6211\u4EEC\u8BB2\u5B8C\u4E86 TransE \u6A21\u578B\u7684\u5B9A\u4E49\uFF0C\u63A5\u4E0B\u6765\u5C31\u662F\u8BB2\u5BF9 TransE \u6A21\u578B\u7684\u8BAD\u7EC3\u4E86\uFF0C\u53EA\u8981\u7406\u89E3\u4E86 TransE \u6A21\u578B\u7684\u5B9A\u4E49\uFF0C\u5176\u8BAD\u7EC3\u5E94\u8BE5\u4E0D\u662F\u96BE\u4E8B\u3002</p>`,3);function is(cs,rs){const m=e("center"),p=e("font"),i=e("ExternalLinkIcon");return r(),o("div",null,[u,g,d,y,k,v,n(m,null,{default:l(()=>[x]),_:1}),b,w,_,f,M,z,L,E,T,N,S,q,B,s("ol",null,[s("li",null,[H,a(" - "),n(p,{color:"red"},{default:l(()=>[a("\u6B63\u786E\u4E09\u5143\u7EC4\u5728\u6D4B\u8BD5\u6837\u672C\u4E2D\u7684\u5F97\u5206\u6392\u540D\uFF0C\u8D8A\u5C0F\u8D8A\u597D")]),_:1})])]),F,s("ol",V,[s("li",null,[G,a(" - "),n(p,{color:"red"},{default:l(()=>[a("\u5F97\u5206\u6392\u540D\u524D n \u540D\u7684\u4E09\u5143\u7EC4\u4E2D\uFF0C\u6B63\u786E\u4E09\u5143\u7EC4\u7684\u5360\u6BD4\uFF0C\u8D8A\u5927\u8D8A\u597D")]),_:1})])]),K,R,U,j,C,n(m,null,{default:l(()=>[I]),_:1}),W,A,Y,D,J,O,P,Q,X,s("p",null,[a("\u5728\u8FD9\u91CC\uFF0C\u5BF9\u4E8E Embedding \u8FD9\u6837\u7684\u4E8C\u7EF4\u77E9\u9635\u6765\u8BF4\uFF0Cfan_in \u548C fan_out \u5C31\u662F\u77E9\u9635\u7684\u957F\u548C\u5BBD\uFF0Cgain \u9ED8\u8BA4\u4E3A 1\u3002\u5176\u5B8C\u6574\u5177\u4F53\u884C\u4E3A\u53EF\u53C2\u8003 "),s("a",Z,[a("pytorch \u521D\u59CB\u5316\u5668\u6587\u6863"),n(i)]),a("\u3002")]),$,ss,as,ns,ts,ls,es,ms,ps])}const us=c(h,[["render",is],["__file","1312.TransE.html.vue"]]);export{us as default};
